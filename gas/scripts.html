<!-- Load the jQuery and jQuery UI libraries. -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>


<script>

// Copyright (c) 2015-2018 Jozef Sovcik. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// When the page loads.
$(function() {
  initNavBar();
     
  $('#frmSettings').submit(function(e) { saveSettings(); return false });
  $('.btnRunNow').on('click', runNow);
  $('#btnShowLog').on('click', showLog);
  $('#btnShowMain').on('click', showMain);
  $('#navBarItmOverview').on('click', showMain);
  $('#navBarItmManage').on('click', showManage);
  $('#navBarItmSettings').on('click', showSettings);
  $('.linkExample').on('click', createExampleList);
  $('#btnUninstall').on('click', uninstallTriggers);
  $('#btnInstTrigger').on('click', installTriggers);
    
  loadSettings();
  getUserAccount();
  
  showMain();

});

//---------------------------------------------------------------------------------
function initNavBar(){
  hideAllSections();
  $('#navBarItmOverview').css("background","url(https://sites.google.com/site/recgtasks/images/navbar-main.png)");
  $('#navBarItmManage').css("background","url(https://sites.google.com/site/recgtasks/images/navbar-manage.png)");
  $('#navBarItmSettings').css("background","url(https://sites.google.com/site/recgtasks/images/navbar-settings.png)");
}

//--------------------------------------------------------------------------------- 
function hideAllSections(){
  $('.section').hide();
  $('.navBarItemSelected').addClass("navBarItem");
  $('.navBarItem').removeClass("navBarItemSelected");
}

//---------------------------------------------------------------------------------
function showMain() {
  hideAllSections();
  $('#navBarItmOverview').addClass("navBarItemSelected");
  $('#navBarItmOverview').removeClass("navBarItem");
  $('#sectionMain').show();
  checkTriggers();
  getRuntimeDetails();
}

//---------------------------------------------------------------------------------
function showSettings() {
  hideAllSections();
  $('#sectionSettings').show();
  $('#navBarItmSettings').addClass("navBarItemSelected");
  $('#navBarItmSettings').removeClass("navBarItem");
  
  loadTaskLists(showTaskLists_Settings);
  
}

//---------------------------------------------------------------------------------
function showManage() {
  hideAllSections();
  initManage();
  $('#sectionManage').show();
  $('#navBarItmManage').addClass("navBarItemSelected");
  $('#navBarItmManage').removeClass("navBarItem");
  
  loadTaskLists(showTaskLists_Manage);
  
}

//---------------------------------------------------------------------------------
function showErrorWindow(error, msg) {
    console.log(msg);
    console.log(error);
    window.alert('An error has occurred, please try again.\r'+msg);
  }

</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68118166-3', 'auto');
  ga('send', 'pageview');

</script>
