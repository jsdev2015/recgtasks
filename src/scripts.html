<!-- Load the jQuery and jQuery UI libraries. -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>


<script>

$(function() {
  initNavBar();
  loadSettings();
  getUserAccount(); 
     
  $('#frmSettings').submit(function(e) { saveSettings(); return false });
  $('.btnRunNow').on('click', runNow);
  $('#btnShowLog').on('click', showLog);
  $('#btnShowMain').on('click', showMain);
  $('#navBarItmOverview').on('click', showMain);
  $('#navBarItmManage').on('click', showManage);
  $('#navBarItmSettings').on('click', showSettings);
  $('.linkExample').on('click', createExampleList);
  $('#btnUninstall').on('click', uninstallTriggers);
  $('#btnInstTrigger').on('click', function(){installTriggers($('#userTMZ').val());});
  $('#btnInst5MinTrigger').on('click', function(){installDebugTrigger();});
    
  
  showMain();

});

//---------------------------------------------------------------------------------
function initNavBar(){
  hideAllSections();
  $('#navBarItmOverview').css("background","url(https://sites.google.com/site/recgtasks/images/navbar-main.png)");
  $('#navBarItmManage').css("background","url(https://sites.google.com/site/recgtasks/images/navbar-manage.png)");
  $('#navBarItmSettings').css("background","url(https://sites.google.com/site/recgtasks/images/navbar-settings.png)");
}

//--------------------------------------------------------------------------------- 
function hideAllSections(){
  $('.scollapse').hide();
  $('.navBarItemSelected').addClass("navBarItem");
  $('.navBarItem').removeClass("navBarItemSelected");
}

//---------------------------------------------------------------------------------
function showMain() {
  hideAllSections();
  $('#navBarItmOverview').addClass("navBarItemSelected");
  $('#navBarItmOverview').removeClass("navBarItem");
  $('#sectionMain').show();
  checkTriggers();
  getRuntimeDetails();
}

//---------------------------------------------------------------------------------
function showSettings() {
  hideAllSections();
  $('#sectionSettings').show();
  $('#navBarItmSettings').addClass("navBarItemSelected");
  $('#navBarItmSettings').removeClass("navBarItem");
  
  loadTaskLists(showTaskLists_Settings);
  
}

//---------------------------------------------------------------------------------
function showManage() {
  hideAllSections();
  initManage();
  $('#sectionManage').show();
  $('#navBarItmManage').addClass("navBarItemSelected");
  $('#navBarItmManage').removeClass("navBarItem");
  
  loadTaskLists(showTaskLists_Manage);
  
}

//---------------------------------------------------------------------------------
function showErrorWindow(error, msg) {
    console.log(msg);
    console.log(error);
    window.alert('An error has occurred, please try again.\r'+msg);
  }

</script>